<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vee's blog - make world better !</title><meta name="keywords" content="Android,Flutter,Spring,cloud"><meta name="author" content="Vee Zhang"><meta name="copyright" content="Vee Zhang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="i&#39;m an Android programer.">
<meta property="og:type" content="website">
<meta property="og:title" content="Vee&#39;s blog">
<meta property="og:url" content="https://vee-zhang.github.io/Vee-blog/index.html">
<meta property="og:site_name" content="Vee&#39;s blog">
<meta property="og:description" content="i&#39;m an Android programer.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vee-zhang.github.io/Vee-blog/null">
<meta property="article:author" content="Vee Zhang">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Flutter">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="cloud">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vee-zhang.github.io/Vee-blog/null"><link rel="shortcut icon" href="/Vee-blog/img/favicon.png"><link rel="canonical" href="https://vee-zhang.github.io/Vee-blog/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/Vee-blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/Vee-blog/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-05-10 18:04:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/Vee-blog/atom.xml" title="Vee's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/Vee-blog/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/Vee-blog/archives/"><div class="headline">文章</div><div class="length-num">28</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/Vee-blog/tags/"><div class="headline">标签</div><div class="length-num">19</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/Vee-blog/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/Vee-blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/Vee-blog/">Vee's blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/Vee-blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Vee-blog/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Vee's blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:william198824@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/Vee-blog/2021/05/10/RecyclerView%E8%A7%A3%E8%AF%BB/" title="对SpringGateway+Security+OAuth2.0的认识">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="对SpringGateway+Security+OAuth2.0的认识"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/05/10/RecyclerView%E8%A7%A3%E8%AF%BB/" title="对SpringGateway+Security+OAuth2.0的认识">对SpringGateway+Security+OAuth2.0的认识</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-10T09:49:10.000Z" title="发表于 2021-05-10 17:49:10">2021-05-10</time></span></div><div class="content">RV是什么123public class RecyclerView extends ViewGroup implements ScrollingView&#123;    ...&#125;
就是个ViewGroup，并且遵循了ScrollingView接口，所以支持滑动。
那么，既然是VG，那么我们就从VG的核心方法入手，他们分别是：

onMeasure
onLayout
onDrow

RV的状态在开始RV的内窥之前，我们先了解一下RV有几种状态，这样有利于我们的理解。
12345678@IntDef(flag = true, value = &#123;        STEP_START, STEP_LAYOUT, STEP_ANIMATIONS&#125;)@Retention(RetentionPolicy.SOURCE)@interface LayoutState &#123;&#125;@LayoutStateint mLayoutStep = STEP_START;

STEP_START：开始状态
STEP_LAYOUT：布局状态
STEP_ANIMATIONS： ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/Vee-blog/2021/04/30/SharedPreferences%E8%A7%A3%E8%AF%BB/" title="SharedPreferences解读">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="SharedPreferences解读"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/04/30/SharedPreferences%E8%A7%A3%E8%AF%BB/" title="SharedPreferences解读">SharedPreferences解读</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-30T06:22:41.000Z" title="发表于 2021-04-30 14:22:41">2021-04-30</time></span></div><div class="content">SharedPreferences解读
SharedPreferences是我们平时常用的简单储存工具。优点就是用起来方便，而且线程安全，甚至有的公司干脆连sqLite都不用了，全用SP！但是突然有一天腾讯弄出了个MMKV用来替代他，最近google也弄了个DataStorage，而且最近面试也是必问原理，于是我决定死磕一下SP。

初始化getSharedPreferences我们通过这个方法拿到SP，该方法在Activity中内置，最终调用的是ContextWrapper的方法：
1234@Overridepublic SharedPreferences getSharedPreferences(String name, int mode) &#123;	return mBase.getSharedPreferences(name, mode);&#125;
ContextWrapper里面调用的mBase的对应方法，通过百度，查到mBase其实就是传说中的ContextImpl：
1234567891011121314151617181920212223242526@Overri ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/Vee-blog/2021/03/24/Android%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%B8%93%E9%A2%98/" title="Android内存泄露专题">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="Android内存泄露专题"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/24/Android%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%B8%93%E9%A2%98/" title="Android内存泄露专题">Android内存泄露专题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-24T08:24:04.000Z" title="发表于 2021-03-24 16:24:04">2021-03-24</time></span></div><div class="content">原因短生命周期对象持有长生命周期对象的强引用，造成短生命周期对象在不需要使用时不能被回收。
静态变量导致12345678910111213public class MainActivity extends AppCompatActivity &#123;    public static boolean RESULT;    private static Activity mActivity;    @Override    protected void onCreate(Bundle savedInstanceState) &#123;        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        mActivity = this;    &#125;&#125;
LeakCanary原理123456789101112131415161718192021222324252627282930313233343536373839404142434445cla ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/Vee-blog/2021/03/24/View%E7%9A%84%E5%89%8D%E5%89%8D%E5%90%8E%E5%90%8E/" title="View的前前后后">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="View的前前后后"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/24/View%E7%9A%84%E5%89%8D%E5%89%8D%E5%90%8E%E5%90%8E/" title="View的前前后后">View的前前后后</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-24T08:16:23.000Z" title="发表于 2021-03-24 16:16:23">2021-03-24</time></span></div><div class="content">setContentView1234567891011121314151617181920212223242526@Overridepublic void setContentView(View v) &#123;    ensureSubDecor();    ViewGroup contentParent = mSubDecor.findViewById(android.R.id.content);    contentParent.removeAllViews();    contentParent.addView(v);    mAppCompatWindowCallback.getWrapped().onContentChanged();&#125;@Overridepublic void setContentView(int resId) &#123;    ensureSubDecor();    ViewGroup contentParent = mSubDecor.findViewById(android.R.id.content);    contentParent ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/Vee-blog/2021/03/22/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" title="View的工作原理">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="View的工作原理"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/22/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" title="View的工作原理">View的工作原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-22T02:37:36.000Z" title="发表于 2021-03-22 10:37:36">2021-03-22</time></span></div><div class="content">三大流程
measure 用来测量View的宽高；
layout    用来确定View在父容器中的放置位置；
draw  负责绘制。

在ActivityThread中，当Activity创建完毕后，会将DecorView附加到Window中，同时会创建ViewRootImpl对象，并将ViewRootImpl与DecorView建立关联。
ViewRootIml其实是DecorView的管理类。
View的绘制流程是从ViewRoot的performTraversals()方法开始的，经过measure、layout、draw三个过程才能最终将一个View绘制出来。
measure通过调用setMeasuredDimension决定View的宽高。
计算之后可以通过getMeasureWidth和getMeasureHeight获取测量后的结构。
measureChildren通过遍历调用measureChild(child,widthMeasureSpec,heightMeasureSpec)方法完成所有子View的测量。
layout用来确定子元素的位置。需要变脸子元素，调用其 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/Vee-blog/2021/03/22/View%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/" title="View事件体系">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="View事件体系"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/22/View%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/" title="View事件体系">View事件体系</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-22T00:55:28.000Z" title="发表于 2021-03-22 08:55:28">2021-03-22</time></span></div><div class="content">位置参数主要位置参数
View的位置主要由它的四个顶点(相对父容器)来决定：

getLeft()
getTop()
getRight()
getBottom()

用于移动的参数
x/y View左上角相对父容器的坐标；
translationX/translationY View左上角相对父容器的偏移量。

x = left + translationX;y = top + translationY;
在View移动中，top和left不会变，xy,translation系列会变。
用户交互MotionEvent事件：

ACTION_DOWN
ACTION_MOVE
ACTION_UP

触发点：

getX/getY 相对当前View左上角的x和y坐标；
getRawX/getRawY 相对于手机屏幕左上角的x和y坐标。

TouchSlop系统能识别出的滑动最小距离。是个常量。
1ViewConfiguration. get(getContext()).getScaledTouchSlop()
可以利用这个常量来做过滤。
VelocityTracker速度追踪，用于追踪手指在 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/Vee-blog/2021/03/19/Java%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/" title="Java线程安全">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="Java线程安全"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/19/Java%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/" title="Java线程安全">Java线程安全</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-19T07:09:10.000Z" title="发表于 2021-03-19 15:09:10">2021-03-19</time></span></div><div class="content">并发三大特性
原子性    操作要么成功，要么失败，中途不可被中断。
可见性    共享变量的变更立即可见。
有序性    程序执行依照代码的先后顺序来执行。

JMM模型JMM的原则是数据拷贝，会从主存拷贝到CPU缓存，再拷贝到CPU寄存器。CPU寄存器的速度远高于缓存，缓存的读写速度远高于主存。当一个线程在寄存器中修改了数据，而没有同步到主存时，另一线程从主存读取了过期的数据，造成数据不同步问题。解决方式是同步访问（加锁）或者通过volatile强制刷写到主存。
指令重排序如果不存在数据依赖性，为了提高性能，编译器和cpu会在不改变程序执行结果的前提下对指令重新排序。
JMM内存屏障
LoadLoad   可保障：在执行屏障后面的所有读取操作之前，屏障前面的读取操作全部完成。
StoreStore  可保障：在执行屏障后面的所有写入操作之前，屏障前面的写入操作全部完成。
LoadStore 可保障：在执行屏障后面的所有写入操作之前，屏障前面的读取操作全部完成。
StoreLoad 可保障：在执行屏障后面的所有读取操作之前，屏障前面的写入操作全部完成。

volatile符合可见性和 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/Vee-blog/2021/03/19/Java%E7%BA%BF%E7%A8%8B/" title="Java线程">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="Java线程"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/19/Java%E7%BA%BF%E7%A8%8B/" title="Java线程">Java线程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-19T01:44:50.000Z" title="发表于 2021-03-19 09:44:50">2021-03-19</time></span></div><div class="content">状态
new 新建
Runnable 可运行
Blocaked 阻塞
Waiting 等待
Timed waiting 计时等待
Terminated 终止


核心方法
void start()启动
void run()调用内部Runnable的run()。
public static void sleep(long millis)休眠指定的毫秒数。
static void yield()使当前运行的线程向另一个线程交出运行权。
getState()获取当前线程状态。
void stop() 终止线程，已废弃。
void suspend() 暂停线程，已废弃。
void resume() 恢复已暂停的线程，已废弃。
void interrupt() 请求终止线程，变更标记为，需要用isInterrupted()判断。还会抛出InterruptedException。
public static boolean interrupted() 检查是否被中断，会重置中断状态为false。
boolean isInterrupted() 作用同上，但是不会重置状态。
static Threa ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/Vee-blog/2021/03/18/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="线程池">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="线程池"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/18/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" title="线程池">线程池</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-18T07:33:07.000Z" title="发表于 2021-03-18 15:33:07">2021-03-18</time></span></div><div class="content">ThreadPoolExecutor1public ThreadPoolExecutor(int corePoolSize,int maximumPoolSize,long keepAliveTime,TimeUnit unit,BlockingQueue&lt;Runnable&gt; workQueue,ThreadFactory threadFactory)
参数解析：

corePoolSize 线程池的核心线程数，默认情况下，核心线程会在线程池中一直存活，即使它们处于闲置状态。如果将ThreadPoolExecutor的allowCoreThreadTimeOut属性设置为true，那么闲置的核心线程在等待新任务到来时会有超时策略，这个时间间隔由keepAliveTime所指定，当等待时间超过keepAliveTime所指定的时长后，核心线程就会被终止。
maximumPoolSize 线程池所能容纳的最大线程数，当活动线程数达到这个数值后，后续的新任务将会被阻塞。
keepAliveTime 非核心线程闲置时的超时时长，超过这个时长，非核心线程就会被回收。当ThreadPo ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/Vee-blog/2021/03/18/HandlerThread%E8%A7%A3%E8%AF%BB/" title="HandlerThread解读">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="HandlerThread解读"></a></div><div class="recent-post-info"><a class="article-title" href="/Vee-blog/2021/03/18/HandlerThread%E8%A7%A3%E8%AF%BB/" title="HandlerThread解读">HandlerThread解读</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-18T06:22:41.000Z" title="发表于 2021-03-18 14:22:41">2021-03-18</time></span></div><div class="content">用法12345678910111213141516171819202122232425// 步骤1：创建HandlerThread实例对象// 传入参数 = 线程名字，作用 = 标记该线程HandlerThread mHandlerThread = new HandlerThread(&quot;handlerThread&quot;);// 步骤2：启动线程mHandlerThread.start();// 步骤3：创建工作线程Handler &amp; 复写handleMessage（）// 作用：关联HandlerThread的Looper对象、实现消息处理操作 &amp; 与其他线程进行通信// 注：消息处理操作（HandlerMessage（））的执行线程 = mHandlerThread所创建的工作线程中执行Handler workHandler = new Handler(mHandlerThread.getLooper()) &#123;    @Override    public void handleMessage(@NonNull Message msg) &# ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/Vee-blog/page/2/">2</a><a class="page-number" href="/Vee-blog/page/3/">3</a><a class="extend next" rel="next" href="/Vee-blog/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/Vee-blog/null" onerror="this.onerror=null;this.src='/Vee-blog/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Vee Zhang</div><div class="author-info__description">i'm an Android programer.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/Vee-blog/archives/"><div class="headline">文章</div><div class="length-num">28</div></a></div><div class="card-info-data-item is-center"><a href="/Vee-blog/tags/"><div class="headline">标签</div><div class="length-num">19</div></a></div><div class="card-info-data-item is-center"><a href="/Vee-blog/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/vee-zhang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:william198824@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Vee-blog/2021/05/10/RecyclerView%E8%A7%A3%E8%AF%BB/" title="对SpringGateway+Security+OAuth2.0的认识"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="对SpringGateway+Security+OAuth2.0的认识"/></a><div class="content"><a class="title" href="/Vee-blog/2021/05/10/RecyclerView%E8%A7%A3%E8%AF%BB/" title="对SpringGateway+Security+OAuth2.0的认识">对SpringGateway+Security+OAuth2.0的认识</a><time datetime="2021-05-10T09:49:10.000Z" title="发表于 2021-05-10 17:49:10">2021-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vee-blog/2021/04/30/SharedPreferences%E8%A7%A3%E8%AF%BB/" title="SharedPreferences解读"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="SharedPreferences解读"/></a><div class="content"><a class="title" href="/Vee-blog/2021/04/30/SharedPreferences%E8%A7%A3%E8%AF%BB/" title="SharedPreferences解读">SharedPreferences解读</a><time datetime="2021-04-30T06:22:41.000Z" title="发表于 2021-04-30 14:22:41">2021-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vee-blog/2021/03/24/Android%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%B8%93%E9%A2%98/" title="Android内存泄露专题"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="Android内存泄露专题"/></a><div class="content"><a class="title" href="/Vee-blog/2021/03/24/Android%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%B8%93%E9%A2%98/" title="Android内存泄露专题">Android内存泄露专题</a><time datetime="2021-03-24T08:24:04.000Z" title="发表于 2021-03-24 16:24:04">2021-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vee-blog/2021/03/24/View%E7%9A%84%E5%89%8D%E5%89%8D%E5%90%8E%E5%90%8E/" title="View的前前后后"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="View的前前后后"/></a><div class="content"><a class="title" href="/Vee-blog/2021/03/24/View%E7%9A%84%E5%89%8D%E5%89%8D%E5%90%8E%E5%90%8E/" title="View的前前后后">View的前前后后</a><time datetime="2021-03-24T08:16:23.000Z" title="发表于 2021-03-24 16:16:23">2021-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vee-blog/2021/03/22/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" title="View的工作原理"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/Vee-blog/img/404.jpg'" alt="View的工作原理"/></a><div class="content"><a class="title" href="/Vee-blog/2021/03/22/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" title="View的工作原理">View的工作原理</a><time datetime="2021-03-22T02:37:36.000Z" title="发表于 2021-03-22 10:37:36">2021-03-22</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/Vee-blog/categories/technology/"><span class="card-category-list-name">technology</span><span class="card-category-list-count">1</span></a></li>
            
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/Vee-blog/tags/Android/" style="font-size: 1.37em; color: #99a4b2">Android</a> <a href="/Vee-blog/tags/Android-AsyncTask/" style="font-size: 1.1em; color: #999">Android AsyncTask</a> <a href="/Vee-blog/tags/Android-Handler-Looper-Message-MessageQueue/" style="font-size: 1.1em; color: #999">Android Handler Looper Message MessageQueue</a> <a href="/Vee-blog/tags/Android-View/" style="font-size: 1.23em; color: #999ea6">Android View</a> <a href="/Vee-blog/tags/Android-binder/" style="font-size: 1.1em; color: #999">Android binder</a> <a href="/Vee-blog/tags/Android-handler-Message-Looper/" style="font-size: 1.1em; color: #999">Android handler Message Looper</a> <a href="/Vee-blog/tags/Android-%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2-NPE/" style="font-size: 1.1em; color: #999">Android 内存泄露 NPE</a> <a href="/Vee-blog/tags/GraphQL/" style="font-size: 1.5em; color: #99a9bf">GraphQL</a> <a href="/Vee-blog/tags/Java/" style="font-size: 1.1em; color: #999">Java</a> <a href="/Vee-blog/tags/android/" style="font-size: 1.1em; color: #999">android</a> <a href="/Vee-blog/tags/android-message/" style="font-size: 1.1em; color: #999">android message</a> <a href="/Vee-blog/tags/android-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-fragment-activity/" style="font-size: 1.1em; color: #999">android,生命周期,fragment,activity</a> <a href="/Vee-blog/tags/cloud/" style="font-size: 1.1em; color: #999">cloud</a> <a href="/Vee-blog/tags/dart/" style="font-size: 1.1em; color: #999">dart</a> <a href="/Vee-blog/tags/flutter/" style="font-size: 1.1em; color: #999">flutter</a> <a href="/Vee-blog/tags/oauth2-0/" style="font-size: 1.1em; color: #999">oauth2.0</a> <a href="/Vee-blog/tags/pub/" style="font-size: 1.1em; color: #999">pub</a> <a href="/Vee-blog/tags/security/" style="font-size: 1.1em; color: #999">security</a> <a href="/Vee-blog/tags/spring/" style="font-size: 1.1em; color: #999">spring</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/Vee-blog/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/Vee-blog/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/Vee-blog/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">17</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/Vee-blog/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/Vee-blog/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">8</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">28</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-05-10T10:04:20.041Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Vee Zhang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/Vee-blog/js/utils.js"></script><script src="/Vee-blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>